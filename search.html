<!DOCTYPE html>
<html lang="en-US">
<head>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/style.css" type="text/css" />
    <meta name="keywords" content="gamesinclass, games" />
    <meta property="og:title" content="gamesinclass" />
    <meta property="og:site_name" content="gamesinclass" />
    <meta property="og:description" content="gamesinclass" />
    <meta name="description" content="gamesinclass" />
    <meta name="author" content="Cedric" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Search</title>
    <style>
        @font-face {
            font-family: 'MinecraftFont';
            src: url('/minecraft_font.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        body {
            color: #ffffff;
            font-family: 'MinecraftFont', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
            background-color: #000000; /* Default background color */
        }

        #blur-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            filter: blur(10px);
            z-index: -1;
        }

        .clock {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5em;
            z-index: 2;
        }

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        input[type="text"] {
            padding: 10px;
            font-size: 1.2em;
            border: none;
            border-radius: 20px;
            margin-bottom: 20px;
            width: 300px;
            background: rgba(255, 255, 255, 0.05); /* 5% opacity */
            backdrop-filter: blur(15px); /* Blur effect */
            color: #ffffff; /* White text color */
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            text-align: center; /* Center the text */
        }

        button {
            cursor: pointer;
            background: linear-gradient(145deg, #1a1a1a, #0e0e0e);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.5), 
                        -6px -6px 12px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        button:hover {
            background: linear-gradient(145deg, #0e0e0e, #1a1a1a);
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(2px);
        }

        #settings {
            display: none;
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(50, 50, 50, 0.9);
            padding: 20px;
            border-radius: 10px;
            z-index: 1;
        }

        #settings label {
            display: block;
            margin: 10px 0;
        }

        #image-input {
            display: none; /* Initially hide image input */
        }

        /* Add space between buttons */
        #settings-button {
            margin-top: 10px; /* Adjust the margin as needed */
        }

        /* Weather widget styles */
        #weather-widget {
            position: absolute;
            top: 20px;
            right: 80px;
            background-color: rgba(0, 0, 0, 0.7);
            color: #ffffff;
            padding: 10px;
            border-radius: 10px;
            z-index: 2;
            font-size: 0.9em;
        }

        /* Snowflake styles */
        #snow-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allow interaction with other elements */
            z-index: -1; /* Position behind other elements */
        }

        .snowflake {
            position: absolute;
            width: 6px; /* Smaller size for subtlety */
            height: 6px;
            background-color: rgba(200, 200, 200, 0.5); /* Darker, more subtle color */
            border-radius: 50%;
            opacity: 0.6; /* More subtle opacity */
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh); /* Move from top to bottom */
            }
        }
    </style>
</head>
<body>
    <div id="blur-background"></div>
    <div id="snow-container"></div>
    <div class="clock" id="clock"></div>
    <div id="weather-widget">
        <div id="weather"></div>
        <div id="temp"></div>
    </div>
    <form action="https://www.google.com/search" method="get">
        <input type="text" name="q" placeholder="Search Google..." required />
        <button type="submit">Search</button>
    </form>
    <button id="settings-button">Settings</button>
    <div id="settings">
        <label for="bg-option">Choose Background Type:</label>
        <select id="bg-option">
            <option value="color">Color</option>
            <option value="image">Image</option>
        </select>

        <div id="color-settings">
            <label for="color-picker">Background Color:</label>
            <input type="color" id="color-picker" />
        </div>

        <div id="image-settings">
            <label for="image-input">Background Image:</label>
            <input type="file" id="image-input" accept="image/*" />
        </div>

        <label for="city-input">City for Weather:</label>
        <input type="text" id="city-input" placeholder="Enter city..." />

        <button id="save-settings">Save</button>
        <button id="close-settings">Close</button>
    </div>

    <script>
        const blurBackground = document.getElementById('blur-background');
        const settingsButton = document.getElementById('settings-button');
        const settingsDiv = document.getElementById('settings');
        const bgOption = document.getElementById('bg-option');
        const colorPicker = document.getElementById('color-picker');
        const imageInput = document.getElementById('image-input');
        const cityInput = document.getElementById('city-input');
        const clockElement = document.getElementById('clock');
        const snowContainer = document.getElementById('snow-container');

        // Snow effect
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.animationDuration = Math.random() * 3 + 2 + 's'; // Random fall duration
            snowContainer.appendChild(snowflake);

            // Remove snowflake after it falls
            snowflake.addEventListener('animationend', () => {
                snowflake.remove();
            });
        }

        // Create snowflakes at intervals
        setInterval(createSnowflake, 300); // Adjust frequency of snowflakes here

        // Load saved settings
        window.onload = () => {
            const savedColor = localStorage.getItem('bgColor');
            const savedImage = localStorage.getItem('bgImage');
            const savedCity = localStorage.getItem('city');

            if (savedColor) {
                document.body.style.backgroundColor = savedColor;
                blurBackground.style.backgroundColor = savedColor; // Set the blur background color
            }
            if (savedImage) {
                blurBackground.style.backgroundImage = `url(${savedImage})`;
                blurBackground.style.filter = 'none'; // Remove blur effect if an image is set
                bgOption.value = 'image'; // Set option to image
                toggleSettings(); // Show image settings
            }
            if (savedCity) {
                cityInput.value = savedCity; // Set saved city in input
            } else {
                cityInput.value = 'Midland, Ontario'; // Set default city
            }

            getWeather(savedCity || 'Midland, Ontario'); // Get weather on load
        };

        // Get weather data
        function getWeather(city) {
            const apiKey = 'bd5e378503939ddaee76f12ad7a97608';
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('weather').innerText = `${data.weather[0].description}`;
                    document.getElementById('temp').innerText = `${Math.round(data.main.temp)}Â°C`;
                })
                .catch(error => {
                    console.error('Error fetching weather data:', error);
                });
        }

        // Toggle settings display
        settingsButton.onclick = () => {
            settingsDiv.style.display = settingsDiv.style.display === 'none' ? 'block' : 'none';
        };

        // Toggle settings visibility based on selected background option
        bgOption.onchange = () => {
            toggleSettings();
        };

        function toggleSettings() {
            if (bgOption.value === 'color') {
                colorPicker.style.display = 'block';
                imageInput.style.display = 'none';
            } else {
                colorPicker.style.display = 'none';
                imageInput.style.display = 'block';
            }
        }

        // Save settings
        document.getElementById('save-settings').onclick = () => {
            if (bgOption.value === 'color') {
                const color = colorPicker.value;
                localStorage.setItem('bgColor', color);
                blurBackground.style.backgroundColor = color; // Set the blur background color
                localStorage.removeItem('bgImage'); // Remove saved image if switching to color
            } else {
                const imageFile = imageInput.files[0];
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        localStorage.setItem('bgImage', e.target.result);
                        blurBackground.style.backgroundImage = `url(${e.target.result})`;
                        blurBackground.style.filter = 'none'; // Remove blur effect if an image is set
                    };
                    reader.readAsDataURL(imageFile);
                }
                localStorage.removeItem('bgColor'); // Remove saved color if switching to image
            }

            const city = cityInput.value;
            localStorage.setItem('city', city); // Save the city
            getWeather(city); // Fetch weather for the new city

            settingsDiv.style.display = 'none'; // Close settings
        };

        // Close settings
        document.getElementById('close-settings').onclick = () => {
            settingsDiv.style.display = 'none';
        };

        // Update clock every second
        function updateClock() {
            const now = new Date();
            clockElement.innerText = now.toLocaleTimeString(); // Get time with seconds
        }
        setInterval(updateClock, 1000);
        updateClock(); // Initialize clock on load
    </script>
</body>
</html>
